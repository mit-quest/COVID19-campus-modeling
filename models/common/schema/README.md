# Models Schema

There are 3 types of JSON files that are relevant to all models:
- `config.json`
- `metadata.json`
- `samples.json`

## Config
The `config.json` specifies important model configuration, including:
- `model_type`, `model_name`, `model_id`
- Model python file and classname that subclasses `model.py`
- Input models required. Each input model requires the `model_type`, `model_name` and `model_id` to be specified
- Model-specific parameters (e.g. random seed)

Each model must have at least one `config.json` file, and providing this model config filepath to the [scenario.json](../../../scheduler/scenarios/scenario_placeholder.json) adds the model to scenario.

## Metadata
The `metadata.json` file is automatically generated by the `ModelRunner` during a model run, and uses the model's config json file as a base.

In addition, it contains additional information used during a particular model run, including:
- Unique identifier (`uuid`) for that model / scenario run
- Scenario parameters for that model run (e.g. `t0_date`, `n_samples`)
- `git_hash` of this repository used to run the models / scenarios

If your model requires one or more input models, an example input metadata file needs to be specified in `<model_type>/example_jsons/`. See [Note: Input metadata & samples](../../README.md#input-metadata-and-samples)

## Samples
The `samples.json` file contains the inputs and/or outputs of the Monte Carlo model simulation.

Each `samples.json` file contains 2 main objects:
- `dates`: An array of dates (in YYYY-MM-DD format) for which the model is simulated for. The length of the array corresponds to the number of days (`days_to_simulate`) that a model / scenario is simulated for
- `samples`: An array of input / output samples.
    - The length of the array corresponds to the number of samples (`n_samples`) that are drawn from the underlying MIT population.
    - For each sample, the length of the array corresponds to the length of the `dates` array, i.e. number of days that the model / scenario is simulated for
    - Each `{sample, date}` then contains 1 value / set of values from the model. For example, infection / prevalence rates of varios zip codes, buildings, etc.

If your model requires one or more input models, an example input samples file needs to be specified in `<model_type>/example_jsons/`. See [Note: Input metadata & samples](../../README.md#input-metadata-and-samples)
